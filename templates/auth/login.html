<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Iraimagal Textile</title>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Theme -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>

<body class="login-page">

    <div id="three-container"></div>

    <div class="login-card card p-4" id="loginCard">
        <div class="login-header text-center">
            <span class="enterprise-label">Enterprise Access</span>
            <!-- Logo placeholder -->
            <div class="mb-4">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo"
                    style="width: 64px; height: 64px; border-radius: 12px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);">
            </div>
            <h3 class="text-primary">Iraimagal Textiles</h3>
            <p>Authorized Personnel Only</p>
        </div>

        <div class="card-body p-0">
            <form method="post">
                <div class="mb-3">
                    <label class="form-label">Username</label>
                    <input type="text" name="username" class="form-control form-control-lg border-0 shadow-sm"
                        placeholder="admin" required autofocus>
                </div>

                <div class="mb-4">
                    <label class="form-label">Password</label>
                    <input type="password" name="password" class="form-control form-control-lg border-0 shadow-sm"
                        placeholder="••••••••" required>
                </div>

                <button type="submit" class="btn btn-primary w-100 py-2 fw-bold shadow-lg" style="letter-spacing: 1px;">
                    ACCESS PORTAL
                </button>

                {% if error %}
                <div class="alert alert-danger mt-3 text-center py-2 text-sm border-0">
                    {{ error }}
                </div>
                {% endif %}
            </form>
        </div>

        <div class="text-center mt-4 text-muted text-xs font-bold" style="letter-spacing: 0.5px; opacity: 0.6;">
            &copy; 2026 IRAIMAGAL TEXTILE &bull; SECURE PORTAL
        </div>
    </div>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // 3D Background Logic (Three.js)
        let scene, camera, renderer, particles;
        const container = document.getElementById('three-container');

        function init3D() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 400;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            // Create particles
            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 15000; i++) {
                vertices.push(
                    Math.random() * 2000 - 1000,
                    Math.random() * 2000 - 1000,
                    Math.random() * 2000 - 1000
                );
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

            const material = new THREE.PointsMaterial({
                size: 2,
                color: 0x38bdf8,
                transparent: true,
                opacity: 0.4,
                blending: THREE.AdditiveBlending
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            particles.rotation.y += 0.001;
            particles.rotation.x += 0.0005;
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init3D();

        // 3D Tilt Effect for Card
        const card = document.getElementById('loginCard');
        document.addEventListener('mousemove', (e) => {
            const range = 15; // Max rotation degrees
            const ax = -(window.innerHeight / 2 - e.pageY) / 40;
            const ay = (window.innerWidth / 2 - e.pageX) / 40;
            card.style.transform = `rotateX(${ax}deg) rotateY(${ay}deg)`;
        });
    </script>

</body>

</html>